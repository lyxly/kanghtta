<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on March, 20 2010 by texi2html 1.78 -->
<!--
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>

-->
<head>
<title>GRUB Manual: 9. Protecting your computer from cracking</title>

<meta name="description" content="GRUB Manual: 9. Protecting your computer from cracking">
<meta name="keywords" content="GRUB Manual: 9. Protecting your computer from cracking">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.78">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.roman {font-family:serif; font-weight:normal;}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="Security"></a>
<a name="SEC34"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="grub_8.html#SEC33" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="grub_10.html#SEC35" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="grub_8.html#SEC33" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="grub.html#SEC_Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="grub_10.html#SEC35" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="grub.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="grub_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="grub_25.html#SEC140" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="grub_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="chapter"> 9. Protecting your computer from cracking </h1>

<p>You may be interested in how to prevent ordinary users from doing
whatever they like, if you share your computer with other people. So
this chapter describes how to improve the security of GRUB.
</p>
<p>One thing which could be a security hole is that the user can do too
many things with GRUB, because GRUB allows one to modify its configuration
and run arbitrary commands at run-time. For example, the user can even
read &lsquo;<tt>/etc/passwd</tt>&rsquo; in the command-line interface by the command
<code>cat</code> (see section <a href="grub_13.html#SEC74">cat</a>). So it is necessary to disable all the
interactive operations.
</p>
<p>Thus, GRUB provides a <em>password</em> feature, so that only administrators
can start the interactive operations (i.e. editing menu entries and
entering the command-line interface). To use this feature, you need to
run the command <code>password</code> in your configuration file
(see section <a href="grub_13.html#SEC62">password</a>), like this:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">password --md5 PASSWORD
</pre></td></tr></table>

<p>If this is specified, GRUB disallows any interactive control, until you
press the key &lt;p&gt; and enter a correct password.  The option
&lsquo;<samp>--md5</samp>&rsquo; tells GRUB that &lsquo;<samp>PASSWORD</samp>&rsquo; is in MD5 format.  If it
is omitted, GRUB assumes the &lsquo;<samp>PASSWORD</samp>&rsquo; is in clear text.
</p>
<p>You can encrypt your password with the command <code>md5crypt</code>
(see section <a href="grub_13.html#SEC95">md5crypt</a>). For example, run the grub shell (see section <a href="grub_15.html#SEC116">Invoking the grub shell</a>), and enter your password:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">grub&gt; md5crypt
Password: **********
Encrypted: $1$U$JK7xFegdxWH6VuppCUSIb.
</pre></td></tr></table>

<p>Then, cut and paste the encrypted password to your configuration file.
</p>
<p>Also, you can specify an optional argument to <code>password</code>. See
this example:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">password PASSWORD /boot/grub/menu-admin.lst
</pre></td></tr></table>

<p>In this case, GRUB will load &lsquo;<tt>/boot/grub/menu-admin.lst</tt>&rsquo; as a
configuration file when you enter the valid password.
</p>
<p>Another thing which may be dangerous is that any user can choose any
menu entry. Usually, this wouldn't be problematic, but you might want to
permit only administrators to run some of your menu entries, such as an
entry for booting an insecure OS like DOS.
</p>
<p>GRUB provides the command <code>lock</code> (see section <a href="grub_13.html#SEC92">lock</a>). This command
always fails until you enter the valid password, so you can use it, like
this:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">title Boot DOS
lock
rootnoverify (hd0,1)
makeactive
chainload +1
</pre></td></tr></table>

<p>You should insert <code>lock</code> right after <code>title</code>, because
any user can execute commands in an entry until GRUB encounters
<code>lock</code>.
</p>
<p>You can also use the command <code>password</code> instead of
<code>lock</code>. In this case the boot process will ask for the password
and stop if it was entered incorrectly.  Since the <code>password</code>
takes its own <var>PASSWORD</var> argument this is useful if you want
different passwords for different entries.
</p>

<hr size="6">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="grub_8.html#SEC33" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="grub_10.html#SEC35" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="grub.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="grub_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="grub_25.html#SEC140" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="grub_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated by <em>root</em> on <em>March, 20 2010</em> using <a href="http://www.nongnu.org/texi2html/"><em>texi2html 1.78</em></a>.
 </font>
 <br>

</p>
</body>
</html>
